\newcommand{\testheader}{\textrotate{\textbf{Step}} & \textbf{Action} & \textbf{Expected Result} & \textrotate{\textbf{Pass}} & \textrotate{\textbf{Fail}} & \textrotate{\textbf{N/A}} & \textbf{Comments} \\ \hline}
\newcommand{\testinfo}[2]{\multicolumn{2}{|r|}{\textbf{Test Case Name:}} & \multicolumn{5}{m{11cm}|}{#1} \\ \hline \multicolumn{2}{|r|}{\textbf{Description:}} & \multicolumn{5}{m{11cm}|}{#2} \\ \hline}
\newcommand{\testerinfo}{\multicolumn{2}{|r|}{\textbf{Name of Tester:}} & & \multicolumn{3}{l|}{\textbf{Date:}} & \\ \hline \multicolumn{2}{|r|}{\textbf{HW/SW Version:}} & & \multicolumn{3}{l|}{\textbf{Time:}} & \\ \hline}
\newcommand{\testsetup}[1]{\multicolumn{2}{|r|}{\textbf{Setup:}} & \multicolumn{5}{m{11cm}|}{#1} \\ \hline}
\newcommand{\testtabular}[3]{\begin{tabular}{|m{.25cm}|m{4cm}|m{5cm}|m{.25cm}|m{.25cm}|m{.25cm}|m{3cm}|}\hline\testinfo{#1}{#2}\testerinfo\testsetup{#3}\testheader}

\chapter{Testing Plan}
Validation and verification prove to all stakeholders that the goals of the project have been met.
Thorough testing throughout the entire project is vital to identifying potential issues and correcting them before a final product is created. 
Validation was completed by comparing the engineering requirements with the marketing requirements that were discussed by the team. 

\section{Verification Metrics}
The following tests will give proof that all of the ten engineering requirements have been met.
\begin{enumerate}
	\item Print out the schematic and the \gls{bom}.
Work through all components on the schematic, placing a check mark next to each component and the corresponding part on the \gls{bom}.
Once the schematic has been fully reviewed, ensure that all items on the \gls{bom} have exactly one check mark next to them.
	\item Use schematic as the netlist for the \gls{pcb} and do not make any manual modifications to the netlist.
Print out the schematic and review it with Professor Detloff to ensure readability.
Verify loading and interface timing analyses through experimental measures using an oscilloscope. 
	\item Generate a \gls{pcb} layout that passes all \gls{drc} operations performed by the \gls{drc} check available at http://www.4pcb.com. 
	\item Use a \gls{dmm} to verify connectivity on all solder joints.
	\item Demonstrate a fully-functional project at the annual senior design showcase. 
\end{enumerate}
\section{Project Milestone Verification}
Landmark milestones will be complete once their associated tests pass.
Table ~\ref{table:testvsland} shows the tests required to be completed for each landmark.

\begin{table}[H]
	\caption{Landmark vs. Required Tests}
	\label{table:testvsland}
	\centering
	\begin{tabular}{|r |c|} 
		\hline\hline
		\textbf{Landmark} & \textbf{Required Tests}\\
		\hline
		\textbf{1.1: Electrical Components} & Step Accuracy, Voltage Supply  \\
		\hline
		\textbf{1.2: Control Software} & G-code Processing  \\
		\hline
		\textbf{1.3: Interface Software} & G-code Processing, Website Test \\
		\hline
		\textbf{1.4: System Testing} & Step Accuracy, G-code Processing, Voltage Supply,\\ 
		& Applications Test, Thermal Shutdown\\
		& Website Test, Serial Link Test \\
		\hline
		\textbf{1.5: Integration Testing} & Automated Regression Testing\\
		\hline
		\textbf{1.6: Unit Testing} & Step Accuracy, G-code Processing, Voltage Supply\\
		\hline 
	\end{tabular}
\end{table}
Test specifications are shown in the Integration, Interface, and Subsystem Testing sections.

\subsection{Integration Testing}
\begin{enumerate}

\item
	\testtabular{Applications Test}{Tests that the system drives 4 stepper motors, 1 DC motor, and 16 GPIO.}{Connect 4 stepper motors and 1 DC motor to motor drivers. Connect test GPIO load to GPIO output. }
		1 & Connect to system through \gls{tcpip}. & System is available and connection is established. & & & & \\ \hline
		2 & Send G-code to system through \gls{tcpip}. & System receives G-code and sends acknowledgment. & & & & \\ \hline
		3 & Send command to execute sent G-code. & System executes the newly received G-code. & & & & \\ \hline
		4 & Verify that all motors respond appropriately. & The 4 stepper motors and 1 DC motor respond appropriately. & & & & \\ \hline
		5 & Verify that all 16 GPIO outputs respond. & The GPIO port responds appropriately. & & & & \\ \hline
	\end{tabular}

\item
	\testtabular{Thermal Shutdown}{Tests that the system shuts down at CPU temperatures greater than $60^{\circ}C$.}{Prepare the system for normal operation in a test oven.}
		1 & Compare system temperature sensor to ambient temperature. & CPU temperature sensor is within $1^{\circ}C$ of ambient temperature.  & & & & \\ \hline
		2 &  Increase oven temperature to  $55^{\circ}C$. Allow system to run until temperature sensor reaches  $55^{\circ}C$. & System operates normally. & & & & \\ \hline
		3 &  Increase oven temperature to  $62^{\circ}C$. & System shuts off when CPU temperature reaches $60^{\circ}C$.  & & & & \\ \hline
		4 &  Note oven temperature at which system shuts off. & System shuts off before oven temperature exceeds $61^{\circ}C$.  & & & & \\ \hline
	\end{tabular}

\end{enumerate}

\subsection{Interface Testing}
\begin{enumerate}

\item
	\testtabular{Website Test}{Tests that G-code can be uploaded and commands sent through the website over \gls{tcpip} to the \gls{pi}.}{Connect system to network through Ethernet or WiFi. Start up computer that can connect to the same network as the system.}
		1 & Log into Website. & Website comes back with greeting and control panel. & & & & \\ \hline
		2 & Choose a G-code file to upload and press upload. & Website confirms upload was successful. & & & & \\ \hline
		3 & Click to view the uploaded G-code file. & Website shows preview of G-code, which matches the uploaded file. & & & & \\ \hline
	\end{tabular}

\item
	\testtabular{Serial Link Test}{Tests that the \gls{pi} and the slave device can communicate serially}{Load serial test code onto \gls{pi} and the slave device.}
		1 & Connect the \gls{pi} and the slave device, power on the system, and connect directly with the \gls{pi}. & \gls{pi} and slave device start up with no errors. & & & & \\ \hline
		2 & Start the serial link test program on the \gls{pi}. & \gls{pi} sends data to the slave device and the slave device responds with the correct 8-bit modulo sum. & & & & \\ \hline
	\end{tabular}

\end{enumerate}

\subsection{Subsystem Testing}

\begin{enumerate}

\item 
	\testtabular{Stepper Motor Accuracy}{Tests that the stepper motor pulses are accurate.}{Configure oscilloscope to measure the frequency of input 1. Set a constant running frequency of 10kHz on all motors through G-code.}
		1 & Connect oscilloscope to the input of the first stepper motor driver. & Oscilloscope measures within 5\% of 10kHz. & & & & \\ \hline
		2 & Repeat the previous step for the second, third, and forth stepper motor drivers. & Oscilloscope measures within 5\% of 10kHz. & & & & \\ \hline
	\end{tabular}

\item 
	\testtabular{G-code processing}{Checks that G-code can be successfully processed by the system.}{Directly connect to \gls{pi} through a shell.}
		1 & Run all automated G-code processing tests. & All tests pass and no errors are reported. & & & & \\ \hline
		2 & Create a sample G-code file for creating a square locally on the \gls{pi}. & File is saved in an accessible directory. & & & & \\ \hline
		3 & Run G-code processing on sample G-code file. & System successfully interprets the G-code and outputs a file with instructions to the motor driver to draw a square. & & & & \\ \hline
	\end{tabular}

\item
	\testtabular{Voltage Supply}{Tests that the system operates between 14-36V.}{Connect system to variable power supply with a range of at least 14-36V or seperate power supplies with voltages of 14V, 25V, and 36V.}
		1 & Set power supply to 14V. & \gls{pi} voltage supply is 5V. Microcontroller voltage supply is 5V. Motor Controller voltage supply is TBD.  & & & & \\ \hline
		2 &  Set power supply to 25V. & \gls{pi} voltage supply is 5V. Microcontroller voltage supply is 5V. Motor Controller voltage supply is TBD. & & & & \\ \hline
		3 & Set power supply to 36V. & \gls{pi} voltage supply is 5V. Microcontroller voltage supply is 5V. Motor Controller voltage supply is TBD. & & & & \\ \hline
	\end{tabular}

\end{enumerate}
